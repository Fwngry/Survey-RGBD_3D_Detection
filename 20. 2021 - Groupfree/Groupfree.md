## 摘要

最近，从三维点云中直接检测三维物体得到了越来越多的关注。为了从不规则的点云中提取物体表征，现有的方法通常采取点分组的步骤，将点分配给一个候选的物体，这样一个类似于PointNet的网络就可以被用来从分组的点中提取物体特征。然而，手工制作的分组方案导致的不准确的点分配降低了三维物体检测的性能。

在本文中，我们提出了一种简单而有效的方法来直接从三维点云中检测三维物体。**我们的方法不是给每个物体候选者分组，而是借助transformer[42]中的注意力机制，从点云中的所有点计算出物体的特征，其中每个点的贡献在网络训练中自动学习。**

**通过改进的注意力叠加方案，我们的方法在不同阶段融合了物体特征，并产生了更准确的物体检测结果。**

在两个广泛使用的基准上，ScanNet V2和SUN RGB-D，所提出的方法实现了最先进的三维物体检测性能。代码和模型可在https://github.com/zeliu98/ Group-Free3D上公开获取。

> 不再分组，transformer学习每个点的贡献，在不同阶层融合物体特征

## 一、引言

点云上的三维物体检测同时从三维点集中定位和识别三维物体。作为3D场景理解的一项基本技术，它在许多应用中发挥着重要作用，如自动驾驶、机器人操纵和增强现实。

与在二维规则图像上工作的二维物体检测不同，三维物体检测需要不规则和稀疏的点云作为输入，这使得它难以直接应用于二维物体检测技术的技术。最近的研究[27, 35, 26, 51]直接从不规则的输入点云中推断出物体位置并提取物体特征，用于物体检测。在这些方法中，需要一个点分组步骤，为每个候选物体分配一组点，然后从分配的点组中计算出物体特征。为此，人们研究了不同的分组策略。

1. Frustum-PointNet[27]应用二维提案箱的Frustum包络进行点分组。
2. Point R-CNN[35]将三维方框内的点分组为物体。
3. VoteNet[26]将分组确定为投票给同一（或空间上接近的）中心点的点。

尽管这些手工制作的分组方案有利于三维物体检测，但真实场景中物体的复杂性和多样性可能导致错误的点分配（如图1所示），并降低三维物体检测的性能。

在本文中，我们提出了一种简单而有效的技术，用于从点云中检测三维物体，而无需手工分组步骤。我们方法的关键思想是将点云中的所有点用于计算每个候选物体的特征，其中每个点的贡献由自动学习的注意力模块决定。**基于这一思想，我们将Transformer应用于三维物体检测，它可以同时模拟物体与物体和物体与像素的关系，并提取物体特征，而无需手工分组。**

为了进一步释放Transformer架构的力量，我们从两个方面对其进行了改进。

首先，我们提出：通过不同阶段更新迭代、重新定义物体的预测；而Transformer的原始应用采用固定的空间编码。

其次，我们在推理过程中使用所有**阶段预测的检测结果的集合**，而不是只使用最后阶段的结果作为最终结果。

这两个修改有效地提高了三维物体检测的性能，而且计算开销很少。

我们用ScanNet V2[6]和SUN RGB-D[52]基准验证了我们的方法。结果表明，我们的方法是有效的，并且对初始物体候选者的质量是稳健的，即使是一个**简单的最远点采样方法**也能在ScanNet V2和SUN RGB-D基准上产生强大的结果。

对于SUN RGB-D数据集，我们的方法和集合方案带来了显著的性能提升（+3.8 mAP@0.25）。在这两个基准上，我们提出的方法几乎没有什么花哨的东西，就取得了最先进的性能。

我们认为，我们的方法还主张通过使用注意力机制或transformer来进行点云建模，因为它自然地解决了三维点云所遇到的内在的不规则和稀疏分布问题，具有强大的潜力。

这与二维图像建模相反，在二维图像建模中，这类建模工具主要作为成熟的网格建模工具的挑战者或补充部分，如ConvNets变体[16, 32, 46]和RoI Align[2, 5]。

## 二、相关工作

**基于网格投影/体素化的检测**

早期的三维物体检测方法将点云投影到二维网格或三维体素，这样就可以直接应用高级卷积网络。

一组方法[18, 19, 50]将点云投影到鸟瞰图上，然后采用二维卷积网络来学习特征并生成三维方框。这些方法主要应用于自动驾驶中的室外场景，在这些场景中，物体分布在一个水平面上，因此它们在鸟瞰图上的投影是无遮挡的。

注意这些方法还需要解决二维点投影的不规则和稀疏分布问题，通常是通过像素化。其他方法[4, 48]将点云投影到正面视图，然后应用二维ConvNets进行物体检测。

基于体素的方法[37, 53]将点转换为体素，并采用三维ConvNets来生成三维盒子的特征。所有这些基于投影/体素化的方法都存在着量化误差。基于体素的方法还受到三维卷积的大内存和计算成本的影响。

**基于点的检测** 

最近的方法直接处理点云进行三维物体检测。这些方法的核心任务是从不规则和稀疏分布的点中计算出物体特征。所有现有的方法都是先给每个候选物体分配一组点，然后从每个点组中计算出物体特征。

FrustumPointNet[27]通过**使用RGB物体检测器**检测到的二维盒子的三维Frustum包络对点进行分组，并对分组的点应用PointNet来提取三维盒子预测的物体特征。

点R-CNN[35]**直接计算**三维盒子的建议，其中该三维盒子内的点被用于物体特征提取。

PV-RCNN[34]**利用体素表示法**来补充Point R-CNN[35]中基于点的表示法，用于三维物体检测，并取得了更好的性能。

VoteNet[26]根据点的投票中心对其进行分组，并通过PointNet从分组的点中提取物体特征。一些后续工作进一步改进了点群生成程序[51]或物体箱定位和识别程序[3]。

我们的方法也是一种基于点的检测方法。与现有的基于点的方法不同，我们的方法涉及所有的点，用于计算每个候选物体的特征，由一个注意力模块来完成。我们还将注意力模块堆叠起来，在保持方法简单的同时，对检测结果进行迭代重修。

**点云的网络结构** 

一大套网络结构[38, 12, 29, 9, 47, 23, 44, 39, 45, 28, 30, 33, 43, 40, 17, 1, 41, 49, 10, 22]已经被提出用于各种基于点云的学习任务。[13]对所有这些架构提供了很好的分类和回顾，讨论所有这些架构已经超出了本文的范围。我们的方法可以将任何点云架构作为计算点特征的骨干网络。在我们的实现中，我们采用了以前的方法[26, 25, 51]中使用的PointNet++[30]，以进行公平的比较。

NLP和二维图像识别中的注意力机制/变换器 

基于注意力的变换器是NLP领域中学习任务的主流网络架构[42, 7, 21]。它们也被应用于二维图像识别领域[16, 32, 46]，成为**ConvNets和RoI-Align等主流网格/密集建模工具的有力竞争者。**与本文最相关的二维图像识别工作是那些将注意力机制或转化器架构应用于二维物体检测的工作[15, 11, 5, 2]。

在这些方法中，我们的方法与[2]最为相似，后者也是应用Transformer架构进行二维物体检测。然而，我们发现，在三维物体检测任务中，直接将这种方法应用于点云会导致性能明显低于我们的方法。一方面，这是由我们提出的新技术造成的，另一方面，这可能是因为我们的方法更好地整合了传统三维检测框架的优势。我们在第4.6节讨论了这些因素。

我们的方法改进了Transformer模型，以更好地适应三维物体检测任务，包括在多阶段迭代盒预测中更新物体查询位置，以及各阶段检测结果的集合。

尽管与其他任务中占主导地位的基于卷积的方法相比，注意力机制仍有一定的性能差距，但我们发现这种架构可能很好地解决了点云上物体检测的点群问题。因此，我们主张这种架构在不规则三维点云建模方面具有强大的潜力。